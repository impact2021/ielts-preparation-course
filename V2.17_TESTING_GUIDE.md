# Version 2.17 Testing Guide

## Overview
This guide provides step-by-step instructions for testing the text highlighting feature implemented in version 2.17 of the IELTS Course Manager plugin.

## Pre-Testing Setup

### Requirements
- WordPress 5.8 or higher
- PHP 7.2 or higher
- IELTS Course Manager plugin v2.17 installed and activated
- At least one course created
- At least one lesson linked to the course
- At least one computer-based test (CBT) exercise linked to the lesson

### Test Data Setup
1. Create a test course (if not exists)
2. Create a test lesson and assign it to the course
3. Create a CBT exercise with:
   - Layout type: Computer-Based IELTS Layout
   - At least 1-2 reading texts with substantial content (multiple paragraphs)
   - At least 5-10 questions
   - Timer set (e.g., 20 minutes) - optional
   - Linked to the test course and lesson

## Test Cases

### Test 1: Clear Button - Initial State

**Objective**: Verify the Clear button is hidden when there are no highlights.

**Steps**:
1. Navigate to the test course page
2. Click on the test lesson
3. Click on the CBT exercise
4. If prompted for fullscreen, click "Open in Fullscreen"
5. Look at the reading text area (left column)

**Expected Results**:
- ✅ Reading text is visible in the left column
- ✅ Clear button is NOT visible (hidden by default)
- ✅ Reading text is selectable (can highlight text with mouse)

**Screenshots Required**:
- Initial state without Clear button

---

### Test 2: Text Selection and Context Menu

**Objective**: Verify that selecting text and right-clicking shows the custom context menu.

**Steps**:
1. On the CBT exercise page, in the reading text area
2. Use mouse to select a word or phrase in the reading text
3. Right-click on the selected text
4. Observe the context menu

**Expected Results**:
- ✅ Custom context menu appears at cursor position
- ✅ Menu shows "Highlight" option with yellow dot indicator (●)
- ✅ Menu is styled with white background and border
- ✅ Menu option is clickable
- ✅ Browser's default context menu is prevented

**Screenshots Required**:
- Selected text with custom context menu visible

---

### Test 3: Highlighting Text - Basic

**Objective**: Verify that clicking "Highlight" in the context menu applies yellow highlighting.

**Steps**:
1. Select text in the reading area
2. Right-click and observe context menu
3. Click "Highlight" option
4. Observe the selected text

**Expected Results**:
- ✅ Selected text now has yellow background (#ffff00)
- ✅ Text remains readable (black text on yellow)
- ✅ Highlight covers entire selected text
- ✅ Context menu disappears after highlighting
- ✅ Text selection is cleared

**Screenshots Required**:
- Text with yellow highlight applied

---

### Test 4: Clear Button - Appears After Highlighting

**Objective**: Verify the Clear button appears after highlighting text.

**Steps**:
1. Highlight some text (from Test 3)
2. Look at the top right of the reading content area

**Expected Results**:
- ✅ Clear button is now visible
- ✅ Button is positioned in top right of reading area
- ✅ Button has red background (#f44336)
- ✅ Button text says "Clear"
- ✅ Button has proper styling (padding, border-radius, shadow)

**Screenshots Required**:
- Clear button visible after highlighting text

---

### Test 5: Multiple Highlights

**Objective**: Verify multiple text sections can be highlighted independently.

**Steps**:
1. Highlight a word or phrase in paragraph 1
2. Highlight a different word or phrase in paragraph 2
3. Highlight another section in paragraph 3
4. Repeat with different selections

**Expected Results**:
- ✅ Each selection gets highlighted with yellow background
- ✅ Previous highlights remain when adding new ones
- ✅ Can highlight overlapping or adjacent text
- ✅ All highlights are preserved
- ✅ Clear button remains visible

**Screenshots Required**:
- Reading text with multiple highlighted sections

---

### Test 6: Highlight Persistence During Quiz

**Objective**: Verify highlights persist when navigating through questions.

**Steps**:
1. Highlight several text sections in the reading text
2. Scroll through the questions in the right column
3. Answer some questions
4. Navigate using question number buttons at the bottom
5. Return to the reading text and observe highlights

**Expected Results**:
- ✅ All highlights remain visible
- ✅ Highlights don't disappear when scrolling
- ✅ Highlights persist when switching between questions
- ✅ Highlights remain when reading text switches (for multi-passage exercises)

---

### Test 7: Clear Button Functionality

**Objective**: Verify the Clear button removes all highlights.

**Steps**:
1. Highlight multiple text sections (from Test 5)
2. Click the "Clear" button
3. Observe the reading text

**Expected Results**:
- ✅ All yellow highlights are removed immediately
- ✅ Text returns to normal appearance (no yellow background)
- ✅ Original text content is preserved
- ✅ Clear button disappears after clearing
- ✅ No JavaScript errors in console

**Screenshots Required**:
- Reading text after clearing all highlights (back to normal)

---

### Test 8: Highlight and Clear - Multiple Cycles

**Objective**: Verify highlighting and clearing can be repeated multiple times.

**Steps**:
1. Highlight some text
2. Clear all highlights
3. Highlight different text
4. Clear again
5. Repeat 2-3 more times

**Expected Results**:
- ✅ Can highlight text after clearing
- ✅ Clear button appears and disappears correctly each cycle
- ✅ No accumulation of issues over multiple cycles
- ✅ No performance degradation
- ✅ No console errors

---

### Test 9: Context Menu - Click Outside to Close

**Objective**: Verify context menu closes when clicking elsewhere.

**Steps**:
1. Select text and right-click to open context menu
2. Without clicking the menu, click somewhere else on the page
3. Observe the context menu

**Expected Results**:
- ✅ Context menu disappears
- ✅ No highlighting is applied
- ✅ Text selection is cleared

---

### Test 10: Quiz Submission - Highlights Cleared

**Objective**: Verify highlights are automatically cleared when quiz is submitted.

**Steps**:
1. Highlight several text sections
2. Answer the quiz questions
3. Submit the quiz
4. After seeing results, if available, review the quiz form
5. Observe the reading text

**Expected Results**:
- ✅ Highlights are cleared from reading text
- ✅ Clear button is hidden
- ✅ Text appears normal (no yellow backgrounds)
- ✅ Session storage is cleared

---

### Test 11: Session Persistence - Refresh Prevention

**Objective**: Verify highlights persist during the active quiz session (before submission).

**Steps**:
1. Highlight several text sections
2. Answer some questions
3. Note the URL
4. DO NOT SUBMIT - instead, close the browser tab
5. Open a new tab and navigate back to the same quiz URL
6. Observe the reading text

**Expected Results**:
- ✅ Highlights are restored from session storage
- ✅ All previously highlighted sections are yellow
- ✅ Clear button is visible
- ✅ Can add new highlights

**Note**: This tests sessionStorage persistence during an active session.

---

### Test 12: Different Quiz - Independent Highlights

**Objective**: Verify highlights are specific to each quiz (not shared).

**Steps**:
1. On Quiz A, highlight some text
2. Navigate to a different Quiz B (another CBT exercise)
3. Observe Quiz B's reading text
4. Highlight different text in Quiz B
5. Navigate back to Quiz A
6. Observe Quiz A's reading text

**Expected Results**:
- ✅ Quiz B starts with no highlights (independent storage)
- ✅ Quiz B highlights don't affect Quiz A
- ✅ Quiz A highlights are preserved when returning
- ✅ Each quiz has its own highlight storage

---

### Test 13: Multi-Paragraph Selection

**Objective**: Verify highlighting works across multiple paragraphs.

**Steps**:
1. Click and drag to select text spanning multiple paragraphs
2. Right-click and select "Highlight"
3. Observe the highlighted text

**Expected Results**:
- ✅ Entire selection is highlighted
- ✅ Highlighting spans across paragraph breaks
- ✅ All selected text has yellow background
- ✅ Highlighting looks continuous

---

### Test 14: Partial Word Selection

**Objective**: Verify highlighting works for partial word selections.

**Steps**:
1. Select only part of a word (e.g., first 3 letters)
2. Right-click and highlight
3. Observe the result

**Expected Results**:
- ✅ Only the selected portion is highlighted
- ✅ Rest of word remains normal
- ✅ Highlighting is precise to selection

---

### Test 15: Special Characters and Formatting

**Objective**: Verify highlighting works with formatted text and special characters.

**Steps**:
1. Find text with bold, italic, or other formatting in reading text
2. Select and highlight formatted text
3. Find text with special characters (quotes, hyphens, numbers)
4. Select and highlight text with special characters

**Expected Results**:
- ✅ Highlighting works on formatted text
- ✅ Original formatting is preserved (bold stays bold)
- ✅ Special characters are highlighted correctly
- ✅ No text corruption

---

### Test 16: Browser Compatibility - Highlighting Feature

**Objective**: Verify text highlighting works across different browsers.

**Browsers to Test**:
- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

**Steps** (for each browser):
1. Open CBT exercise
2. Select and highlight text
3. Verify context menu appears
4. Verify highlighting applies correctly
5. Test Clear button
6. Test persistence across page navigation

**Expected Results**:
- ✅ Consistent appearance across browsers
- ✅ Context menu works in all browsers
- ✅ Yellow highlighting appears correctly
- ✅ No browser-specific issues
- ✅ No console errors

---

### Test 17: Mobile Device - Touch Selection

**Objective**: Verify highlighting works on mobile devices with touch selection.

**Steps**:
1. Open CBT exercise on mobile device or emulator
2. Long-press to select text
3. Look for context menu or highlighting option
4. Test Clear button tap

**Expected Results**:
- ✅ Can select text via touch/long-press
- ✅ Context menu appears on right-click simulation (or selection handles)
- ✅ Highlighting works on mobile
- ✅ Clear button is tappable and visible
- ✅ Layout is responsive

**Note**: Mobile browser behavior may vary. Right-click simulation may require specific gestures.

---

### Test 18: Accessibility - Keyboard Navigation

**Objective**: Verify Clear button is accessible via keyboard.

**Steps**:
1. Highlight some text
2. Use Tab key to navigate through interactive elements
3. When Clear button receives focus, press Enter or Space
4. Observe result

**Expected Results**:
- ✅ Clear button can receive keyboard focus
- ✅ Clear button has visible focus indicator
- ✅ Enter/Space key activates the button
- ✅ All highlights are cleared

---

### Test 19: Performance - Multiple Highlights

**Objective**: Verify performance with many highlights.

**Steps**:
1. Highlight 20-30 different text sections
2. Scroll through the reading text
3. Navigate through questions
4. Clear all highlights

**Expected Results**:
- ✅ No noticeable lag when adding highlights
- ✅ Scrolling remains smooth
- ✅ Clear operation is instant
- ✅ No browser freezing or slowdown
- ✅ No console errors

---

### Test 20: Edge Case - Empty Selection

**Objective**: Verify behavior when right-clicking without selecting text.

**Steps**:
1. Click in the reading area without selecting any text
2. Right-click
3. Observe behavior

**Expected Results**:
- ✅ Custom context menu does NOT appear
- ✅ Browser's default context menu may appear (normal behavior)
- ✅ No JavaScript errors

---

### Test 21: Edge Case - Highlighting Outside Reading Text

**Objective**: Verify highlighting is restricted to reading text area only.

**Steps**:
1. Try to select text in the questions column (right side)
2. Right-click on selected question text
3. Observe if context menu appears

**Expected Results**:
- ✅ Context menu does NOT appear for non-reading text
- ✅ Highlighting only works in reading text area
- ✅ Questions remain unaffected

---

### Test 22: Clear Button - Disabled State

**Objective**: Verify Clear button cannot be clicked when already cleared.

**Steps**:
1. Highlight text so Clear button appears
2. Click Clear button
3. Try clicking Clear button again (it should be hidden)

**Expected Results**:
- ✅ Button disappears after first click
- ✅ Cannot click when no highlights exist
- ✅ No errors when trying to clear with no highlights

---

## Regression Testing

### Existing CBT Features to Verify Still Work

1. **Reading Text Display**
   - ✅ Reading texts show in left column
   - ✅ Reading text switching works (for linked questions)
   - ✅ Multiple reading texts handled correctly
   - ✅ Text is readable and formatted properly

2. **Question Navigation**
   - ✅ Question buttons work
   - ✅ Smooth scrolling to questions
   - ✅ Question highlighting works
   - ✅ Answered status shows (green background)

3. **Quiz Submission**
   - ✅ Submit button works
   - ✅ Results modal appears
   - ✅ Score calculation is correct
   - ✅ Band score conversion works

4. **Timer Functionality**
   - ✅ Timer counts down correctly
   - ✅ Timer display updates every second
   - ✅ Timer warnings work (5 min, 1 min)
   - ✅ Auto-submit on time expiration

5. **Answer Review**
   - ✅ "Review my answers" button works
   - ✅ Correct/incorrect highlighting
   - ✅ Feedback displays correctly

6. **Layout and Responsiveness**
   - ✅ Two-column layout works
   - ✅ Responsive on tablet and mobile
   - ✅ Scrolling works in both columns
   - ✅ No layout issues with Clear button

---

## Bug Reporting Template

If you find any issues during testing, please report them using this template:

```
**Bug Title**: [Brief description]

**Test Case**: Test #X - [Test name]

**Severity**: [Critical / High / Medium / Low]

**Environment**:
- WordPress Version: 
- PHP Version: 
- Browser: 
- Device: 

**Steps to Reproduce**:
1. 
2. 
3. 

**Expected Result**:
[What should happen]

**Actual Result**:
[What actually happened]

**Screenshots**:
[Attach screenshots if applicable]

**Console Errors**:
[Any JavaScript errors from browser console]

**Additional Notes**:
[Any other relevant information]
```

---

## Success Criteria

All tests must pass with ✅ for the release to be considered ready for production.

### Critical Tests (Must Pass)
- Test 2: Context menu appears
- Test 3: Highlighting applies
- Test 4: Clear button appears
- Test 7: Clear button removes highlights
- Test 10: Highlights cleared on submission

### High Priority Tests (Should Pass)
- Test 5: Multiple highlights
- Test 6: Highlight persistence
- Test 11: Session persistence
- Test 12: Independent quiz highlights
- Test 16: Browser compatibility (at least 3 major browsers)

### Nice to Have (Good to Pass)
- Test 17: Mobile device support
- Test 18: Keyboard accessibility
- Test 19: Performance with many highlights
- All edge case tests (20-22)

---

## Testing Sign-off

Once all tests are completed, please fill in:

**Tester Name**: ___________________
**Date**: ___________________
**Version Tested**: 2.17
**Overall Result**: ☐ PASS / ☐ FAIL
**Ready for Production**: ☐ YES / ☐ NO

**Notes**:
___________________________________________
___________________________________________
___________________________________________
