# Version 2.20 Testing Guide

## Overview
This guide provides comprehensive testing instructions for Version 2.20, which introduces the Multi-Select question type and fixes the text highlighting feature.

## Pre-Testing Requirements
- WordPress 5.8 or higher
- PHP 7.2 or higher
- Plugin activated and configured
- At least one course, lesson, and quiz created

## Test 1: Multi-Select Question Creation (Admin)

### Steps
1. Log in as an administrator
2. Navigate to **IELTS Courses > Exercises** (or Quizzes)
3. Create a new quiz or edit an existing one
4. Click **Add Question**
5. Select **Multi Select** as the question type

### Expected Results
- ✅ Multi-select settings section appears with "Maximum Number of Selections" field
- ✅ Answer Options section shows checkboxes for marking correct answers (not radio buttons)
- ✅ Can mark multiple options as correct
- ✅ Default max selections is set to 2

### Test Data
**Question**: Which of these are fruits?
- Apple ✓ (Correct)
- Banana ✓ (Correct)
- Cabbage
- Lettuce
- Potato

**Settings**:
- Maximum Number of Selections: 2
- Points: 2

## Test 2: Multi-Select Question - Switching Question Types

### Steps
1. Create a new question with type **Multiple Choice**
2. Change the type to **Multi Select**
3. Change the type to **True/False**
4. Change back to **Multi Select**

### Expected Results
- ✅ Multi-select settings appear when type is Multi Select
- ✅ Multi-select settings hide when changing to other types
- ✅ Answer Options section visibility changes appropriately
- ✅ No JavaScript errors in console

## Test 3: Multi-Select Question - Frontend Display (Standard Layout)

### Steps
1. Create a quiz with a multi-select question (use Test 1 data)
2. Assign the quiz to a course
3. Log out (or use incognito mode)
4. Log in as a student
5. Navigate to the quiz
6. View the multi-select question

### Expected Results
- ✅ Question displays with checkboxes (not radio buttons)
- ✅ Hint text shows "Select up to 2 options" (or appropriate number)
- ✅ All options are enabled initially
- ✅ Can select multiple options

## Test 4: Multi-Select Question - Selection Limit Enforcement

### Steps
1. Continue from Test 3
2. Try to select 3 options when max is 2

### Expected Results
- ✅ Can select first option successfully
- ✅ Can select second option successfully
- ✅ When selecting third option:
  - Checkbox does not check
  - Error message appears: "You can only select up to 2 options"
  - Message is a toast/inline notification (not browser alert)
- ✅ After selecting max, remaining checkboxes are disabled
- ✅ Can uncheck an option to enable others again

## Test 5: Multi-Select Question - Scoring (All Correct)

### Steps
1. Create quiz with multi-select question (Test 1 data)
2. As student, take the quiz
3. Select **Apple** and **Banana** (both correct)
4. Submit quiz

### Expected Results
- ✅ Points earned: 2 out of 2
- ✅ Question marked as correct
- ✅ Correct feedback is displayed (if set)

## Test 6: Multi-Select Question - Scoring (Partial Correct)

### Steps
1. Take the quiz again
2. Select **Apple** (correct) and **Potato** (incorrect)
3. Submit quiz

### Expected Results
- ✅ Points earned: 1 out of 2
- ✅ Question marked as incorrect (due to selecting wrong option)
- ✅ Incorrect feedback is displayed (if set)

## Test 7: Multi-Select Question - Scoring (All Incorrect)

### Steps
1. Take the quiz again
2. Select **Cabbage** and **Lettuce** (both incorrect)
3. Submit quiz

### Expected Results
- ✅ Points earned: 0 out of 2
- ✅ Question marked as incorrect
- ✅ Incorrect feedback is displayed (if set)

## Test 8: Multi-Select Question - Scoring (Incomplete Selection)

### Steps
1. Take the quiz again
2. Select only **Apple** (correct, but incomplete - missing Banana)
3. Submit quiz

### Expected Results
- ✅ Points earned: 1 out of 2
- ✅ Question marked as incorrect (not all correct answers selected)
- ✅ Incorrect feedback is displayed (if set)

## Test 9: Multi-Select Question - Computer-Based Layout

### Steps
1. Create or edit a quiz
2. Set **Layout Type** to "Computer-Based IELTS Layout"
3. Add multi-select question with reading text
4. As student, access the quiz
5. Test the multi-select functionality

### Expected Results
- ✅ Question displays in right column
- ✅ Reading text displays in left column
- ✅ Checkboxes work correctly
- ✅ Selection limit is enforced
- ✅ Scoring works as expected

## Test 10: Text Highlighting Fix (Computer-Based Layout)

### Steps
1. Create a Computer-Based quiz with reading text
2. As student, access the quiz
3. Select some text in the reading passage
4. Right-click on the selected text

### Expected Results
- ✅ Custom highlight menu appears (not browser's default context menu)
- ✅ Menu shows "Highlight" option
- ✅ Clicking "Highlight" highlights the text in yellow
- ✅ Highlighted text persists when scrolling
- ✅ Can highlight multiple sections
- ✅ "Clear Highlights" button appears when highlights exist
- ✅ Clicking "Clear Highlights" removes all highlights

## Test 11: Multi-Select with Other Question Types

### Steps
1. Create a quiz with mixed question types:
   - Multiple Choice question
   - Multi Select question
   - True/False question
   - Fill in the Blank question
2. As student, answer all questions
3. Submit quiz

### Expected Results
- ✅ All question types display correctly
- ✅ Each question type functions independently
- ✅ Scoring for each type is calculated correctly
- ✅ Total score is accurate

## Test 12: Backward Compatibility

### Steps
1. Test existing quizzes created before v2.20
2. Verify they still work correctly

### Expected Results
- ✅ Existing Multiple Choice questions still work
- ✅ Existing True/False questions still work
- ✅ Existing Fill in the Blank questions still work
- ✅ Existing Essay questions still work
- ✅ No data loss or corruption

## Test 13: Admin Guidelines

### Steps
1. Go to quiz edit page
2. Scroll to "Question Type Guidelines" section

### Expected Results
- ✅ Guidelines section includes Multi Select description
- ✅ Description explains: "Students can select multiple answers. Mark all correct options. Students earn 1 point for each correct selection. Set the maximum number of selections and total points accordingly."

## Test 14: JavaScript Console Check

### Steps
1. Open browser developer tools (F12)
2. Go to Console tab
3. Perform all the tests above

### Expected Results
- ✅ No JavaScript errors in console
- ✅ No warnings related to the plugin
- ✅ All functionality works smoothly

## Test 15: Cross-Browser Testing

### Browsers to Test
- Chrome/Edge (Chromium)
- Firefox
- Safari (if available)

### Expected Results
- ✅ Multi-select works in all browsers
- ✅ Text highlighting works in all browsers
- ✅ UI displays correctly in all browsers
- ✅ No browser-specific issues

## Test 16: Mobile Responsiveness

### Steps
1. Test on mobile device or use browser's responsive mode
2. Create/view multi-select questions
3. Test highlighting feature

### Expected Results
- ✅ Multi-select checkboxes are touch-friendly
- ✅ Text highlighting works with touch/long-press
- ✅ Error messages display appropriately
- ✅ Layout is responsive

## Test 17: Edge Cases

### Test 17.1: Empty Multi-Select
**Steps**: Submit quiz without selecting any options
**Expected**: Points earned: 0, marked as incorrect

### Test 17.2: Single Option Multi-Select
**Steps**: Create multi-select with max_selections = 1, only 1 correct answer
**Expected**: Works like multiple choice but with checkboxes

### Test 17.3: All Options Correct
**Steps**: Create multi-select where all options are correct
**Expected**: Can select all, scores correctly

### Test 17.4: Very Long Option Text
**Steps**: Create option with 200+ characters
**Expected**: Text wraps properly, checkbox aligns correctly

## Regression Testing

### Areas to Verify
1. ✅ Enrollment system still works
2. ✅ Progress tracking still works
3. ✅ Course/Lesson navigation still works
4. ✅ Timer functionality still works (if enabled)
5. ✅ Band score conversion still works (if applicable)
6. ✅ Quiz results display correctly
7. ✅ Student progress page shows multi-select quizzes

## Performance Testing

### Steps
1. Create a quiz with 40 multi-select questions
2. Add 10 options per question
3. Complete and submit the quiz

### Expected Results
- ✅ Page loads within acceptable time
- ✅ JavaScript doesn't lag when enforcing selection limits
- ✅ Submission processes within 5 seconds
- ✅ No memory leaks

## Security Testing

### Steps
1. Try to manipulate form data in browser console
2. Try to select more options than allowed via console
3. Try to inject HTML/JavaScript in option text

### Expected Results
- ✅ Server validates all inputs
- ✅ Cannot earn more points by manipulation
- ✅ HTML/JavaScript is properly escaped
- ✅ No XSS vulnerabilities

## Checklist Summary

### Critical Tests (Must Pass)
- [ ] Test 1: Multi-Select Question Creation
- [ ] Test 5: Scoring - All Correct
- [ ] Test 6: Scoring - Partial Correct
- [ ] Test 10: Text Highlighting Fix
- [ ] Test 12: Backward Compatibility
- [ ] Test 17: Edge Cases

### Important Tests (Should Pass)
- [ ] Test 2: Switching Question Types
- [ ] Test 4: Selection Limit Enforcement
- [ ] Test 9: Computer-Based Layout
- [ ] Test 11: Mixed Question Types
- [ ] Test 14: JavaScript Console Check

### Optional Tests (Nice to Have)
- [ ] Test 15: Cross-Browser Testing
- [ ] Test 16: Mobile Responsiveness
- [ ] Performance Testing
- [ ] Security Testing

## Known Issues
None reported at this time.

## Troubleshooting

### Issue: Multi-select settings don't appear
**Solution**: Clear browser cache and refresh

### Issue: Checkboxes don't enforce limit
**Solution**: Check browser console for JavaScript errors, ensure frontend.js is loaded

### Issue: Highlighting doesn't work
**Solution**: Verify quiz is using Computer-Based layout, ensure right-click menu appears

### Issue: Scoring is incorrect
**Solution**: Verify correct answers are marked in admin, check that max_selections matches number of correct answers

## Sign-Off

After completing all tests, confirm:
- [ ] All critical tests passed
- [ ] No major bugs found
- [ ] Documentation is accurate
- [ ] Ready for production deployment

**Tested by**: _______________
**Date**: _______________
**Version**: 2.20
