# Version 2.36 Testing Guide

## Overview

This guide provides detailed test cases for verifying the changes introduced in Version 2.36.

## Prerequisites

Before testing, ensure you have:
- WordPress site with IELTS Course Manager plugin installed
- At least one course with multiple lessons
- Each lesson should have multiple items (sub-lessons and/or exercises)
- Some exercises should be configured as Computer-Based Tests (CBT)
- A test user account to take quizzes

---

## Test Case 1: Lesson Table Layout - Type Column

### Objective
Verify that "End of lesson test" displays on one line without wrapping.

### Steps
1. Create or navigate to a lesson with an exercise labeled as "End of lesson test"
2. View the lesson page
3. Locate the lesson content table
4. Find the "Type" column

### Expected Results
- ✅ "End of lesson test" appears on a single line
- ✅ Text is not wrapped or truncated
- ✅ Column is wide enough to accommodate the full text
- ✅ Table maintains professional appearance

### Screenshot Points
- Take screenshot of lesson table showing "End of lesson test" badge

---

## Test Case 2: Lesson Table Layout - Action Column

### Objective
Verify that "Retake (Fullscreen)" button text displays on one line.

### Steps
1. Complete a CBT exercise configured to open in fullscreen
2. Return to the lesson page
3. Locate the exercise in the lesson content table
4. Find the "Action" column

### Expected Results
- ✅ "Retake (Fullscreen)" appears on a single line
- ✅ Button text is not wrapped or truncated
- ✅ Button maintains proper styling
- ✅ Column is wide enough for button

### Screenshot Points
- Take screenshot showing "Retake (Fullscreen)" button

---

## Test Case 3: Next Page Button - Before Submission (With Next Item)

### Objective
Verify "Next page >" button appears before submitting a quiz when there's a next item.

### Setup
1. Create a lesson with at least 2 exercises in sequence
2. Ensure exercises have menu_order set (e.g., 1, 2)

### Steps
1. Open the first exercise (before submitting any answers)
2. Look for the navigation button in the top left corner
3. Note the button text
4. Click the button (DO NOT submit quiz first)

### Expected Results
- ✅ Button shows "Next page >" (not "< Return to course")
- ✅ Button is visible before answering any questions
- ✅ NO confirmation dialog appears when clicking
- ✅ Navigates to the next exercise correctly
- ✅ No data loss warning

### Screenshot Points
- Take screenshot showing "Next page >" button before submission

---

## Test Case 4: Next Page Button - After Submission (With Next Item)

### Objective
Verify "Next page >" button still works after quiz submission.

### Steps
1. Open an exercise that has a next item
2. Complete and submit the quiz
3. Locate the navigation button
4. Click "Next page >"

### Expected Results
- ✅ Button still shows "Next page >"
- ✅ Button remains functional after submission
- ✅ Navigates to next item correctly
- ✅ No confirmation dialog

### Screenshot Points
- Take screenshot showing results with "Next page >" button

---

## Test Case 5: Return to Course Button - No Next Item

### Objective
Verify "< Return to course" button appears when there's no next item.

### Setup
1. Create a lesson with only one exercise, OR
2. Navigate to the last exercise in a lesson

### Steps
1. Open the last exercise in the lesson
2. Look for the navigation button
3. Note the button text
4. Click button BEFORE submitting quiz

### Expected Results
- ✅ Button shows "< Return to course"
- ✅ Confirmation dialog DOES appear (warning about losing progress)
- ✅ Canceling dialog keeps you on quiz page
- ✅ Accepting dialog navigates to course page
- ✅ Quiz progress is lost (expected behavior)

### Screenshot Points
- Take screenshot showing warning dialog

---

## Test Case 6: Next Page Navigation - Mixed Content

### Objective
Verify navigation works correctly through mixed lesson content (sub-lessons and exercises).

### Setup
1. Create a lesson with this sequence (menu_order):
   - Sub-lesson (menu_order: 1)
   - Exercise (menu_order: 2)
   - Sub-lesson (menu_order: 3)
   - Exercise (menu_order: 4)

### Steps
1. Open first exercise (menu_order: 2)
2. Verify button shows "Next page >"
3. Click "Next page >"
4. Verify navigation to sub-lesson (menu_order: 3)
5. Navigate to last exercise (menu_order: 4)
6. Verify button shows "< Return to course"

### Expected Results
- ✅ Navigation follows menu_order correctly
- ✅ "Next page >" appears when there's a next item
- ✅ "< Return to course" appears on last item
- ✅ Navigation includes both sub-lessons and exercises

---

## Test Case 7: CBT Fullscreen Navigation

### Objective
Verify CBT exercises maintain fullscreen mode when navigating.

### Setup
1. Create two CBT exercises in sequence
2. Both should have "Open as popup" enabled
3. Set appropriate menu_order

### Steps
1. Open first CBT exercise in fullscreen mode
2. Verify "Next page >" button appears
3. Click "Next page >"
4. Verify next exercise opens in fullscreen mode

### Expected Results
- ✅ First exercise opens in fullscreen
- ✅ "Next page >" button visible
- ✅ Second exercise opens in fullscreen (not regular mode)
- ✅ URL includes `?fullscreen=1` parameter

---

## Test Case 8: Warning Dialog - Navigation to Next Exercise

### Objective
Verify NO warning appears when clicking "Next page >" (since there's no data loss).

### Steps
1. Open an exercise with a next item
2. Answer some questions (do NOT submit)
3. Click "Next page >" button

### Expected Results
- ✅ NO confirmation dialog appears
- ✅ Navigation happens immediately
- ✅ Answers from previous quiz are lost (expected - user chose to navigate)

### Rationale
When going to the next page, the user is intentionally navigating through the lesson. Unlike returning to the course (which might be accidental), moving to the next page is a deliberate learning flow action.

---

## Test Case 9: Warning Dialog - Return to Course

### Objective
Verify warning DOES appear when clicking "< Return to course".

### Steps
1. Open an exercise that is the last item (no next item)
2. Answer some questions (do NOT submit)
3. Click "< Return to course" button

### Expected Results
- ✅ Confirmation dialog DOES appear
- ✅ Warning message mentions losing progress
- ✅ Canceling keeps you on quiz
- ✅ Accepting navigates to course

---

## Test Case 10: Multiple Lessons in Course

### Objective
Verify navigation works correctly with multiple lessons.

### Setup
1. Create a course with multiple lessons
2. Each lesson has multiple exercises
3. Exercises have proper menu_order

### Steps
1. Complete an exercise in Lesson 1
2. Verify "Next page >" goes to next item in Lesson 1
3. Complete last exercise in Lesson 1
4. Verify button shows "< Return to course" (not "Next lesson")

### Expected Results
- ✅ Navigation stays within current lesson
- ✅ Does not automatically jump to next lesson
- ✅ Returns to course page after last item in lesson

### Note
This is expected behavior. Cross-lesson navigation is handled at the course level, not the exercise level.

---

## Test Case 11: Mobile Responsiveness

### Objective
Verify lesson table and buttons work on mobile devices.

### Steps
1. View lesson page on mobile device or responsive view
2. Check table layout
3. Check button accessibility

### Expected Results
- ✅ Table columns adjust for mobile
- ✅ Text remains readable (no wrapping on tiny screens)
- ✅ Buttons are tappable (min 44x44px touch target)
- ✅ "Next page >" button accessible on mobile

---

## Test Case 12: Browser Compatibility

### Objective
Verify changes work across different browsers.

### Browsers to Test
- Chrome/Chromium
- Firefox
- Safari
- Edge

### For Each Browser
1. View lesson table
2. Open and navigate through exercises
3. Test "Next page >" functionality
4. Test warning dialogs

### Expected Results
- ✅ Consistent behavior across all browsers
- ✅ No JavaScript errors in console
- ✅ CSS renders correctly

---

## Test Case 13: Accessibility

### Objective
Verify changes are accessible to screen reader users.

### Steps
1. Use screen reader (NVDA, JAWS, or VoiceOver)
2. Navigate to lesson table
3. Tab through table cells
4. Tab to "Next page >" button
5. Activate button with keyboard

### Expected Results
- ✅ Table structure announced correctly
- ✅ Column headers readable
- ✅ "Next page >" button announced
- ✅ Button activatable with Enter/Space key
- ✅ Warning dialog accessible

---

## Test Case 14: Performance

### Objective
Verify next URL calculation doesn't slow down page load.

### Steps
1. Open browser developer tools
2. Navigate to quiz page
3. Check Network tab for load time
4. Check Console for any errors

### Expected Results
- ✅ Page loads in reasonable time (< 2 seconds)
- ✅ No JavaScript errors
- ✅ No PHP warnings or notices
- ✅ Database queries are efficient

---

## Regression Testing

### Verify No Breaking Changes

Test these existing features to ensure they still work:

1. ✅ Standard quiz submission
2. ✅ CBT quiz submission
3. ✅ Quiz retake functionality
4. ✅ Progress tracking
5. ✅ Score display (band score and percentage)
6. ✅ Timer functionality
7. ✅ Quiz navigation (question buttons)
8. ✅ Answer feedback display
9. ✅ Breadcrumb navigation
10. ✅ Course enrollment

---

## Edge Cases

### Test Case 15: Lesson with Only Sub-Lessons (No Exercises)

**Setup**: Create a lesson with only sub-lessons, no exercises

**Expected**: No navigation issues, "< Return to course" button works

### Test Case 16: Exercise Not Linked to Course

**Setup**: Create an exercise without a course_id

**Expected**: No "Return to course" button appears (by design)

### Test Case 17: Exercise Linked to Multiple Lessons

**Setup**: Add exercise to multiple lessons

**Expected**: Next URL calculation uses current lesson context

### Test Case 18: Very Long Lesson (20+ Items)

**Setup**: Create lesson with 20+ items

**Expected**: Navigation works correctly, performance acceptable

---

## Bug Reporting

If you encounter issues, please report with:
- Test case number
- Steps to reproduce
- Expected vs. actual behavior
- Screenshot or video
- Browser and version
- WordPress version
- Plugin version

---

## Test Results Template

```
## Test Results - Version 2.36

**Tester**: [Name]
**Date**: [Date]
**Environment**: [WordPress version, Browser, etc.]

### Test Case 1: Lesson Table - Type Column
- [ ] PASS
- [ ] FAIL
- Notes: ___________

### Test Case 2: Lesson Table - Action Column
- [ ] PASS
- [ ] FAIL
- Notes: ___________

[Continue for all test cases...]

### Overall Result
- [ ] All tests passed - Ready for release
- [ ] Some tests failed - Needs fixes
- [ ] Blocked - Cannot proceed

### Additional Notes
[Any other observations]
```

---

## Conclusion

Complete all test cases before approving release. Pay special attention to:
- Lesson table layout (Test Cases 1-2)
- Next page navigation (Test Cases 3-7)
- Warning dialogs (Test Cases 8-9)
- Regression testing (all existing features)

**Estimated Testing Time**: 2-3 hours for complete suite

**Priority Test Cases** (if time is limited):
1. Test Case 3 (Next Page Before Submission)
2. Test Case 1 (Lesson Table Type Column)
3. Test Case 2 (Lesson Table Action Column)
4. Test Case 8 (Warning Dialog - Next Page)
5. Regression Testing (Basic Quiz Flow)
