# Version 2.2 Testing Guide

This guide provides step-by-step instructions for testing all new features added in Version 2.2.

## Prerequisites

1. WordPress installation with IELTS Course Manager plugin version 2.2 installed
2. Admin access to WordPress dashboard
3. At least one exercise (quiz) created for testing

## Feature 1: Question Duplication

### Test Steps

1. Navigate to WordPress Admin > IELTS Courses > Exercises
2. Create a new exercise or edit an existing one
3. Add a question (any type: Multiple Choice, True/False, Fill in the Blank, or Essay)
4. Fill in all question details:
   - Question text
   - Answer options (for Multiple Choice)
   - Correct answer
   - Points
   - Feedback messages
5. Click the **"Duplicate Question"** button at the bottom of the question
6. Verify that a new question appears immediately below with:
   - All the same content as the original
   - Heading shows "Question X (Duplicated)"
   - All fields are populated with copied data
7. Modify the duplicated question to ensure it's independent
8. Save the exercise
9. Verify both questions are saved correctly

### Expected Results

✅ Duplicate button creates an exact copy of the question  
✅ Duplicated question maintains all options and settings  
✅ Both questions save independently  
✅ Works for all question types  

## Feature 2: Drag-and-Drop Question Reordering

### Test Steps

1. Navigate to an exercise with multiple questions (at least 3-4 questions)
2. Look for the **drag handle icon** (☰ menu icon) on the left side of each question
3. Click and hold the drag handle on any question
4. Drag the question up or down to a new position
5. Release to drop the question in the new position
6. Notice the question numbers update automatically
7. Try reordering multiple questions
8. Save the exercise
9. Reload the page and verify the new order is preserved

### Expected Results

✅ Drag handle appears on each question  
✅ Questions can be dragged and dropped smoothly  
✅ Visual placeholder shows where question will be dropped  
✅ Question numbers update automatically after reordering  
✅ New order is saved to the database  
✅ Question content remains intact after reordering  

### Visual Indicators

- **Drag handle**: Gray menu icon (☰) on the left
- **Placeholder**: Gray dashed box showing drop position
- **Active drag**: Question becomes slightly transparent while dragging

## Feature 3: WYSIWYG Editor for Reading Texts

### Test Steps

1. Navigate to an exercise with Computer-Based layout (or create a new one)
2. In the **Layout Type** dropdown, select **"Computer-Based IELTS Layout"**
3. The **Reading Texts** section should appear
4. Click **"Add Reading Text"** if no reading texts exist
5. Notice the **Reading Text** field now has:
   - Full WordPress visual editor toolbar
   - Bold, Italic, Underline buttons
   - List formatting options
   - Link insertion
   - Image upload/insertion
6. Test the editor features:
   - Type some text
   - Apply bold and italic formatting
   - Create a bulleted or numbered list
   - Add a link
   - Insert an image (optional)
7. Save the exercise
8. Reload and verify all formatting is preserved

### Expected Results

✅ Visual editor (WYSIWYG) appears for reading text fields  
✅ Full formatting toolbar is available  
✅ Can add bold, italic, underline, lists, links  
✅ Can insert images and media  
✅ HTML formatting is preserved after saving  
✅ Reading text displays correctly on frontend with formatting  

### Note on Dynamically Added Reading Texts

For reading texts added dynamically by clicking "Add Reading Text", a plain textarea is used instead of the visual editor due to WordPress limitations. However, HTML can still be manually entered and will be preserved.

## Feature 4: Hidden Pass Percentage Field

### Test Steps

1. Navigate to any exercise edit page
2. Scroll to the **Quiz Settings** section
3. Look for the **Pass Percentage** field
4. Verify it is **NOT visible** (hidden)
5. Open browser developer tools (F12)
6. Inspect the HTML and find the pass percentage field
7. Verify it has `display: none` style
8. Save the exercise without changing anything
9. Check the database to confirm pass percentage is still stored

### Expected Results

✅ Pass percentage field is not visible in the admin UI  
✅ Field still exists in the HTML (with display: none)  
✅ Pass percentage value is saved to database  
✅ Backward compatibility maintained  
✅ Cleaner admin interface without cluttering field  

### Database Verification (Optional)

If you have database access, you can verify the meta value is saved:
```sql
SELECT post_id, meta_key, meta_value 
FROM wp_postmeta 
WHERE meta_key = '_ielts_cm_pass_percentage' 
AND post_id = [YOUR_QUIZ_ID];
```

## Integration Testing

### Scenario 1: Create a Complete Exercise

1. Create a new exercise with Computer-Based layout
2. Add 3-4 reading texts using the WYSIWYG editor with formatting
3. Add 10 questions of various types
4. Use duplicate button to create variations of questions
5. Drag and drop to reorder questions logically
6. Save the exercise
7. Preview on frontend to verify everything displays correctly

### Scenario 2: Edit an Existing Exercise

1. Open an existing exercise with questions
2. Duplicate a few questions
3. Reorder all questions using drag-and-drop
4. Edit reading text with WYSIWYG formatting
5. Save changes
6. Verify no data loss occurred
7. Check frontend display

## Known Limitations

1. **TinyMCE in Duplicated Questions**: When duplicating a question, the visual editor (TinyMCE) is not re-initialized on the duplicate. The content is preserved in a textarea. Save and reload to get the visual editor on duplicated questions.

2. **Dynamic Reading Texts**: Reading texts added dynamically use a plain textarea instead of WYSIWYG editor. Existing reading texts loaded with the page use WYSIWYG.

3. **Editor Content During Drag**: When reordering questions with active TinyMCE editors, the content is preserved in the textarea. The visual editor can be re-initialized by saving and reloading the page.

## Troubleshooting

### Issue: Drag-and-Drop Not Working

**Solution**: Ensure jQuery UI is loaded. Check browser console for JavaScript errors.

### Issue: Duplicate Button Not Responding

**Solution**: Check browser console for errors. Ensure JavaScript is enabled.

### Issue: WYSIWYG Editor Not Showing

**Solution**: 
- Verify the exercise uses "Computer-Based IELTS Layout"
- Check that reading texts were present when page loaded (not added dynamically)
- Clear WordPress cache and reload

### Issue: Question Numbers Don't Update After Drag

**Solution**: This is a display issue only. The question data is correctly reordered. Save the exercise and reload to see correct numbering.

## Reporting Issues

If you encounter any issues during testing:

1. Note the exact steps to reproduce
2. Check browser console for JavaScript errors
3. Capture screenshots if possible
4. Document expected vs. actual behavior
5. Report to development team with details

## Compatibility Notes

- **WordPress Version**: 5.8+
- **PHP Version**: 7.2+
- **Browser**: Modern browsers (Chrome, Firefox, Safari, Edge)
- **jQuery**: Required for drag-and-drop
- **TinyMCE**: WordPress built-in visual editor

## Summary Checklist

Before marking testing as complete, verify:

- [ ] Question duplication works for all question types
- [ ] Drag-and-drop reorders questions correctly
- [ ] Question order persists after save
- [ ] WYSIWYG editor appears for reading texts
- [ ] Rich formatting is preserved in reading texts
- [ ] Pass percentage field is hidden
- [ ] Pass percentage still saves to database
- [ ] No data loss during any operation
- [ ] Frontend displays exercises correctly
- [ ] All JavaScript features work without console errors

## Test Sign-Off

**Tester Name**: ___________________________  
**Date**: ___________________________  
**Version Tested**: 2.2  
**Test Result**: ☐ Pass ☐ Fail (with issues documented)  
**Notes**: ___________________________
