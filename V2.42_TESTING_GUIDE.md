# Version 2.42 Testing Guide

## Overview

This guide provides step-by-step instructions for testing Version 2.42, which fixes the dropdown paragraph display bug and adds support for both `__N__` and `___N___` placeholder formats.

## Pre-Testing Checklist

- [ ] Backup production database before testing
- [ ] Test in staging environment first
- [ ] Have access to WordPress admin panel
- [ ] Have access to frontend quiz display

## Test Scenarios

### Test 1: Version Update Verification
**Objective**: Verify plugin version is correctly updated

**Steps**:
1. Navigate to WordPress Admin → Plugins
2. Find "IELTS Course Manager" in the plugin list
3. Check the version number

**Expected Result**: Version should display as "2.42"

**Status**: ☐ Pass ☐ Fail

---

### Test 2: Existing Dropdown Questions (Backward Compatibility)
**Objective**: Ensure existing dropdown paragraph questions still work correctly

**Steps**:
1. Navigate to an existing exercise with dropdown paragraph questions (if available)
2. View the question in admin edit mode
3. Save without making changes
4. View the exercise on the frontend as a student

**Expected Results**:
- ✅ Admin view shows dropdown options correctly
- ✅ Frontend displays question text with dropdown selects (not duplicate text)
- ✅ Dropdowns show correct options
- ✅ Question text appears only once
- ✅ No malformed text like `-A: optionB: option`

**Status**: ☐ Pass ☐ Fail ☐ N/A (no existing questions)

---

### Test 3: New Question with Triple Underscores (___N___)
**Objective**: Verify triple underscore format works as before

**Steps**:
1. Navigate to Courses → Add New Exercise
2. Set Exercise Label (e.g., "Exercise")
3. Add a new question
4. Select "Dropdown Paragraph Questions" as question type
5. In the question text field, enter:
   ```
   I think it's ___1___ but I ___2___ to the party.
   ```
6. Click "Add Dropdown" to add dropdown for position 1
7. Add options:
   - Option 1: "great" (mark as correct)
   - Option 2: "good"
   - Option 3: "not good"
8. Click "Add Dropdown" to add dropdown for position 2
9. Add options:
   - Option 1: "can't come"
   - Option 2: "don't come" (mark as correct)
   - Option 3: "will not be"
10. Save the exercise
11. View in admin mode (re-edit the exercise)
12. View on frontend

**Expected Results**:

**In Admin (after save and re-edit)**:
- ✅ Question text shows: `I think it's 1.[A: great B: good C: not good] but I 2.[A: can't come B: don't come C: will not be] to the party.`
- ✅ Dropdown 1 shows 3 options with "great" marked as correct
- ✅ Dropdown 2 shows 3 options with "don't come" marked as correct

**On Frontend**:
- ✅ Question displays with inline dropdown selects
- ✅ Text reads naturally with dropdowns embedded
- ✅ First dropdown has options: "-", "A: great", "B: good", "C: not good"
- ✅ Second dropdown has options: "-", "A: can't come", "B: don't come", "C: will not be"
- ✅ NO duplicate text appears
- ✅ NO malformed text like `-A: greatB: goodC: not good`

**Status**: ☐ Pass ☐ Fail

---

### Test 4: New Question with Double Underscores (__N__)
**Objective**: Verify new double underscore format works correctly

**Steps**:
1. Navigate to Courses → Add New Exercise
2. Set Exercise Label (e.g., "Exercise")
3. Add a new question
4. Select "Dropdown Paragraph Questions" as question type
5. In the question text field, enter (using DOUBLE underscores):
   ```
   The weather is __1__ and I feel __2__.
   ```
6. Click "Add Dropdown" to add dropdown for position 1
7. Add options:
   - Option 1: "sunny" (mark as correct)
   - Option 2: "rainy"
   - Option 3: "cloudy"
8. Click "Add Dropdown" to add dropdown for position 2
9. Add options:
   - Option 1: "happy" (mark as correct)
   - Option 2: "sad"
   - Option 3: "tired"
10. Save the exercise
11. View in admin mode (re-edit the exercise)
12. View on frontend

**Expected Results**:

**In Admin (after save and re-edit)**:
- ✅ Question text shows: `The weather is 1.[A: sunny B: rainy C: cloudy] and I feel 2.[A: happy B: sad C: tired].`
- ✅ Dropdown 1 shows 3 options with "sunny" marked as correct
- ✅ Dropdown 2 shows 3 options with "happy" marked as correct

**On Frontend**:
- ✅ Question displays with inline dropdown selects
- ✅ Text reads naturally with dropdowns embedded
- ✅ First dropdown has options: "-", "A: sunny", "B: rainy", "C: cloudy"
- ✅ Second dropdown has options: "-", "A: happy", "B: sad", "C: tired"
- ✅ NO duplicate text appears
- ✅ NO malformed text

**Status**: ☐ Pass ☐ Fail

---

### Test 5: Mixed Format (Both ___N___ and __N__ in Same Question)
**Objective**: Verify handling of mixed formats

**Steps**:
1. Navigate to Courses → Add New Exercise
2. Add a new question with "Dropdown Paragraph Questions" type
3. In the question text field, enter (using MIXED formats):
   ```
   I will ___1___ tomorrow and __2__ later.
   ```
4. Add dropdown options for both positions
5. Save and view

**Expected Results**:
- ✅ Both placeholders are replaced correctly
- ✅ Frontend displays both dropdowns properly
- ✅ No errors or warnings

**Status**: ☐ Pass ☐ Fail

---

### Test 6: Multiple Dropdowns (3+)
**Objective**: Verify support for multiple dropdowns in one question

**Steps**:
1. Create a question with 4+ dropdowns
2. Use any combination of `__N__` or `___N___` format
3. Example: `I __1__ to __2__ when __3__ is __4__.`
4. Add options for all 4 positions
5. Save and view on frontend

**Expected Results**:
- ✅ All dropdowns display correctly
- ✅ All options are available in each dropdown
- ✅ No duplicate text
- ✅ Dropdowns are in correct positions

**Status**: ☐ Pass ☐ Fail

---

### Test 7: Special Characters in Options
**Objective**: Verify proper handling of special characters

**Steps**:
1. Create a dropdown question
2. Add options with special characters:
   - Option 1: "it's nice" (apostrophe)
   - Option 2: "very "good"" (quotes)
   - Option 3: "50% better" (percent sign)
3. Save and view

**Expected Results**:
- ✅ Special characters are properly escaped
- ✅ Options display correctly on frontend
- ✅ No HTML rendering issues

**Status**: ☐ Pass ☐ Fail

---

### Test 8: Computer-Based Layout
**Objective**: Verify fix works in computer-based layout

**Steps**:
1. Create or edit an exercise
2. Set Layout Type to "Computer-Based Test (CBT)"
3. Add a dropdown paragraph question with `__1__` or `___1___`
4. Save and view on frontend

**Expected Results**:
- ✅ Question displays correctly in CBT layout
- ✅ No duplicate text
- ✅ Dropdowns function properly

**Status**: ☐ Pass ☐ Fail

---

### Test 9: Student Submission & Grading
**Objective**: Verify dropdown answers are correctly evaluated

**Steps**:
1. Create a dropdown question (any format)
2. View as a student
3. Select answers from dropdowns
4. Submit the exercise
5. View results

**Expected Results**:
- ✅ Correct answers are marked as correct
- ✅ Incorrect answers are marked as incorrect
- ✅ Score is calculated correctly
- ✅ Feedback (if any) displays properly

**Status**: ☐ Pass ☐ Fail

---

### Test 10: Export/Import JSON
**Objective**: Verify dropdown questions can be exported and imported

**Steps**:
1. Create a dropdown paragraph question
2. Export the exercise to JSON
3. Check the JSON format includes `dropdown_options` field
4. Import the JSON into a new exercise
5. Verify the imported question works correctly

**Expected Results**:
- ✅ Export includes all dropdown data
- ✅ Import recreates question correctly
- ✅ Options and correct answers are preserved

**Status**: ☐ Pass ☐ Fail

---

### Test 11: Edge Case - No Placeholders
**Objective**: Verify graceful handling when no placeholders in text

**Steps**:
1. Create a dropdown paragraph question
2. Enter question text WITHOUT any `__N__` or `___N___` placeholders
3. Add dropdown options anyway
4. Save and view

**Expected Results**:
- ✅ Question saves without errors
- ✅ Frontend displays question text (without dropdowns since no placeholders)
- ✅ No crashes or errors

**Status**: ☐ Pass ☐ Fail

---

### Test 12: Edge Case - Missing Dropdown Options
**Objective**: Verify handling when placeholder exists but no options defined

**Steps**:
1. Create a dropdown paragraph question
2. Enter text with `__1__` placeholder
3. Don't add any dropdown options for position 1
4. Save and view

**Expected Results**:
- ✅ Question saves (or shows appropriate error)
- ✅ Frontend displays gracefully (either shows placeholder or hides it)
- ✅ No crashes

**Status**: ☐ Pass ☐ Fail

---

## Browser Compatibility Testing

Test the frontend display in multiple browsers:

- [ ] Chrome (latest)
- [ ] Firefox (latest)
- [ ] Safari (latest)
- [ ] Edge (latest)
- [ ] Mobile Safari (iOS)
- [ ] Mobile Chrome (Android)

**Expected**: Dropdowns display and function correctly in all browsers

---

## Performance Testing

- [ ] Create exercise with 10+ dropdown questions
- [ ] Save time is reasonable (< 5 seconds)
- [ ] Frontend load time is reasonable (< 3 seconds)
- [ ] No browser console errors

---

## Regression Testing

Verify other question types still work:

- [ ] Multiple Choice questions
- [ ] Multi-Select questions
- [ ] True/False questions
- [ ] Short Answer questions
- [ ] Essay questions
- [ ] Summary Completion questions
- [ ] Headings questions
- [ ] Matching questions

**Expected**: All question types continue to work as before

---

## Documentation Verification

- [ ] Admin help text mentions both `__N__` and `___N___` formats
- [ ] Export/Import documentation is accurate
- [ ] V2.42_IMPLEMENTATION_SUMMARY.md is complete
- [ ] V2.42_SECURITY_SUMMARY.md is complete

---

## Post-Testing Checklist

- [ ] All critical tests passed
- [ ] No security issues identified
- [ ] No performance degradation
- [ ] Documentation is accurate
- [ ] Ready for production deployment

---

## Issue Tracking

If any test fails, document here:

| Test # | Issue Description | Severity | Status |
|--------|------------------|----------|--------|
|        |                  |          |        |

---

## Sign-off

**Tested By**: ___________________
**Date**: ___________________
**Environment**: ☐ Staging ☐ Production
**Result**: ☐ All Tests Passed ☐ Issues Found (see above)
**Approved for Production**: ☐ Yes ☐ No
