# Version 2.38 Testing Guide

## Overview

This guide provides step-by-step instructions for testing the new dropdown paragraph question type and the JSON paste import functionality introduced in version 2.38.

## Prerequisites

- WordPress installation with IELTS Course Manager plugin active
- Admin access to create/edit exercises
- Basic understanding of quiz/exercise creation

## Test 1: Dropdown Paragraph Question Type - Basic Functionality

### Setup
1. Log in to WordPress admin
2. Navigate to "IELTS Quizzes" → "Add New" or edit an existing exercise
3. Add a new question or edit an existing one

### Test Case 1.1: Simple Two-Option Dropdown

**Question Type**: Select `dropdown_paragraph`

**Question Text**:
```
1.[A: Sincere apologies B: Really sorry], unfortunately I am writing to 2.[A: let you know B: inform you] that I will now be unable to meet with you as 3.[A: we said we would B: previously arranged] at 3pm on March 25th.
```

**Correct Answer**:
```
1:A|2:B|3:B
```

**Expected Behavior**:
- ✅ Three inline dropdown fields should appear in the paragraph
- ✅ Each dropdown should have options: "- / A: [text] / B: [text]"
- ✅ Dropdown 1 should have: "A: Sincere apologies" and "B: Really sorry"
- ✅ Dropdown 2 should have: "A: let you know" and "B: inform you"
- ✅ Dropdown 3 should have: "A: we said we would" and "B: previously arranged"
- ✅ Dropdowns should appear inline with the text, not on separate lines
- ✅ Default selected value should be "-"

**Test Submission**:
1. Select A, B, B respectively
2. Submit the quiz
3. **Expected**: Question marked as correct
4. Try A, A, B
5. **Expected**: Question marked as incorrect

### Test Case 1.2: Three-Option Dropdown

**Question Text**:
```
The research was conducted in 1.[A: 2015 B: 2016 C: 2017] by 2.[A: national B: international C: local] scientists over a period of 3.[A: 3 B: 5 C: 7] years.
```

**Correct Answer**:
```
1:A|2:B|3:B
```

**Expected Behavior**:
- ✅ Three inline dropdown fields should appear
- ✅ Each dropdown should have three options plus the default "-"
- ✅ All options should be clearly labeled with letters A, B, C

**Test Submission**:
1. Select A, B, B
2. **Expected**: Correct
3. Select A, B, C
4. **Expected**: Incorrect (third answer wrong)

### Test Case 1.3: Mixed Option Counts

**Question Text**:
```
Dear Sir/Madam, I am writing to 1.[A: say B: inform you C: tell you] that I will be 2.[A: late B: delayed] for our 3.[A: meeting B: appointment C: get-together D: session] on Friday.
```

**Correct Answer**:
```
1:B|2:B|3:B
```

**Expected Behavior**:
- ✅ Dropdown 1 has 3 options
- ✅ Dropdown 2 has 2 options
- ✅ Dropdown 3 has 4 options
- ✅ All dropdowns render correctly inline

## Test 2: Computer-Based Test Layout

### Setup
1. Navigate to an exercise with dropdown paragraph questions
2. Switch to computer-based test layout

**Expected Behavior**:
- ✅ Dropdowns appear in the reading panel (right side)
- ✅ Styling should match computer-based theme (2px border)
- ✅ Focus state should highlight dropdown with blue border
- ✅ All functionality should work identically to standard layout

## Test 3: Answer Validation Edge Cases

### Test Case 3.1: Empty Selections

**Action**: Submit quiz with some dropdowns left at default "-"

**Expected**: Question marked as incorrect

### Test Case 3.2: Case Insensitivity

**Action**: Manually modify submitted value to lowercase "a", "b", "c"

**Expected**: Should still be marked correct (case-insensitive matching)

### Test Case 3.3: Incomplete Answers

**Action**: Answer only 2 out of 3 dropdowns

**Expected**: Question marked as incorrect

## Test 4: JSON Paste Import Functionality

### Setup
1. Navigate to any existing exercise
2. In the "Import Exercise" meta box on the right sidebar

### Test Case 4.1: Tab Switching

**Steps**:
1. Look for two tabs: "Upload File" and "Paste JSON"
2. Click "Paste JSON" tab

**Expected Behavior**:
- ✅ Tab switches from "Upload File" to "Paste JSON"
- ✅ File input area is hidden
- ✅ Textarea appears for pasting JSON (10 rows, monospace font)
- ✅ "Import from JSON Text" button is visible
- ✅ Tab button styling updates (active tab has blue underline)

### Test Case 4.2: JSON Paste Import

**Steps**:
1. Export an exercise to JSON (use "Export Exercise" meta box)
2. Copy the JSON content
3. Create or edit a different exercise
4. Click "Paste JSON" tab
5. Paste the JSON content into the textarea
6. Click "Import from JSON Text"
7. Confirm the import dialog

**Expected Behavior**:
- ✅ Import confirmation dialog appears
- ✅ After confirming, loading message appears
- ✅ Page reloads with imported content
- ✅ Success message is shown
- ✅ Exercise content matches the exported exercise

### Test Case 4.3: Error Handling

**Test 4.3.1: Empty Textarea**
1. Click "Import from JSON Text" with empty textarea
2. **Expected**: Error message "Please paste JSON content."

**Test 4.3.2: Invalid JSON**
1. Paste invalid JSON (e.g., "not valid json")
2. Click import button
3. **Expected**: Error message about invalid JSON format

**Test 4.3.3: Tab Switching Back**
1. Switch to "Paste JSON" tab
2. Switch back to "Upload File" tab
3. **Expected**: File upload interface appears, textarea is hidden

## Test 5: Backward Compatibility

### Test Case 5.1: Existing Question Types

**Steps**:
1. Create questions with existing types (multiple_choice, true_false, etc.)
2. Submit answers

**Expected**: All existing question types work exactly as before

### Test Case 5.2: Summary Completion (v2.37 feature)

**Steps**:
1. Create a summary_completion question with `[ANSWER 1]` placeholders
2. Test submission

**Expected**: Inline text inputs work as implemented in v2.37

## Test 6: CSS and Visual Testing

### Desktop Testing
- ✅ Dropdowns display inline with proper spacing
- ✅ Line height provides adequate vertical space
- ✅ Dropdown width is appropriate (min-width: 150px, auto-adjusts)
- ✅ Hover state shows cursor pointer
- ✅ Focus state is visible (computer-based layout)

### Mobile/Responsive Testing
- ✅ Dropdowns remain usable on smaller screens
- ✅ Touch interaction works properly
- ✅ Text doesn't overflow or wrap awkwardly

## Test 7: Performance Testing

### Large Question Sets
1. Create an exercise with 10+ dropdown paragraph questions
2. Each question with 3-4 dropdowns
3. Load and submit the quiz

**Expected**:
- ✅ Page loads without delay
- ✅ All dropdowns render correctly
- ✅ Submission processes normally
- ✅ No JavaScript errors in console

## Known Limitations

1. **Option Text Format**: Options must follow the format `A: text B: text`. Colons within option text may cause parsing issues.
2. **Letter Sequence**: Options should use sequential letters (A, B, C, etc.). Skipping letters may work but is not recommended.
3. **Dropdown Numbering**: Dropdowns must be numbered sequentially starting from 1.

## Troubleshooting

### Dropdowns Not Appearing
- Check that question type is set to `dropdown_paragraph`
- Verify placeholder format: `N.[A: text B: text]` (number, period, square brackets)
- Ensure there's a space after the colon in each option

### JSON Paste Tab Not Working
- Clear browser cache
- Check browser console for JavaScript errors
- Verify jQuery is loaded on the page

### Incorrect Answer Checking
- Verify correct answer format: `1:A|2:B|3:C`
- Ensure numbers match the dropdown positions
- Check that letters match the options provided

## Testing Checklist

Use this checklist to ensure comprehensive testing:

- [ ] Test Case 1.1: Simple two-option dropdown
- [ ] Test Case 1.2: Three-option dropdown
- [ ] Test Case 1.3: Mixed option counts
- [ ] Test 2: Computer-based layout
- [ ] Test Case 3.1: Empty selections
- [ ] Test Case 3.2: Case insensitivity
- [ ] Test Case 3.3: Incomplete answers
- [ ] Test Case 4.1: Tab switching
- [ ] Test Case 4.2: JSON paste import
- [ ] Test Case 4.3: Error handling
- [ ] Test Case 5.1: Existing question types
- [ ] Test Case 5.2: Summary completion
- [ ] Test 6: CSS and visual testing
- [ ] Test 7: Performance testing

## Success Criteria

All tests should pass with:
- ✅ No JavaScript errors in browser console
- ✅ No PHP errors in WordPress debug log
- ✅ Correct answer validation working accurately
- ✅ Proper visual rendering in both layouts
- ✅ All existing functionality intact
- ✅ JSON paste import working smoothly
