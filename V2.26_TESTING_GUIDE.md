# Version 2.26 Testing Guide

**Version**: 2.26  
**Purpose**: Verify export download fix and version update  
**Estimated Testing Time**: 15-20 minutes

---

## Prerequisites

- WordPress 5.8 or higher
- PHP 7.2 or higher
- Administrator access to WordPress dashboard
- At least one course, lesson, page, and quiz created

---

## Test Environment Setup

### 1. Verify Version

**Steps**:
1. Navigate to WordPress admin dashboard
2. Go to Plugins > Installed Plugins
3. Locate "IELTS Course Manager"

**Expected Result**:
- ✅ Version displays as "2.26"

**Status**: [ ] Pass [ ] Fail

---

## Core Functionality Tests

### Test 1: Export All Content Types

**Objective**: Verify export downloads correctly with all content types selected

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Ensure all checkboxes are checked:
   - ✅ Courses
   - ✅ Lessons
   - ✅ Lesson Pages
   - ✅ Quizzes
3. Leave "Include draft posts" unchecked
4. Click "Generate XML Export File"

**Expected Results**:
- ✅ Browser initiates download immediately
- ✅ File named like `ielts-export-2025-12-19.xml` downloads
- ✅ File size > 0 bytes
- ✅ No redirect to previous page
- ✅ File contains valid XML

**Verification**:
1. Open downloaded file in text editor
2. Check it starts with `<?xml version="1.0"`
3. Check it contains `<rss version="2.0"`
4. Check it contains your course/lesson/quiz data

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 2: Export Single Content Type

**Objective**: Verify selective export works correctly

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Uncheck all except "Courses"
3. Click "Generate XML Export File"

**Expected Results**:
- ✅ Download initiates
- ✅ File downloads successfully
- ✅ File contains only course data (no lessons, pages, or quizzes)

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 3: Include Draft Posts

**Objective**: Verify draft content export option works

**Setup**:
1. Create a draft course (don't publish)
2. Note the draft course title

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Select "Courses"
3. Check "Include draft posts"
4. Click "Generate XML Export File"

**Expected Results**:
- ✅ Download initiates
- ✅ File contains draft course title
- ✅ File contains `<wp:status>draft</wp:status>` for draft course

**Verification**:
1. Open exported XML file
2. Search for your draft course title
3. Verify it's included in the export

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 4: No Content Selected Error

**Objective**: Verify proper error handling

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Uncheck ALL content type checkboxes
3. Click "Generate XML Export File"

**Expected Results**:
- ✅ NO download occurs
- ✅ Redirects back to export page
- ✅ URL contains `error=no_types` parameter
- ✅ No error messages in PHP logs

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 5: Multiple Content Types

**Objective**: Verify mixed content export works

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Select:
   - ✅ Courses
   - ✅ Lessons
   - ⬜ Lesson Pages (unchecked)
   - ⬜ Quizzes (unchecked)
3. Click "Generate XML Export File"

**Expected Results**:
- ✅ Download initiates
- ✅ File contains courses and lessons
- ✅ File does NOT contain lesson pages or quizzes

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

## Browser Compatibility Tests

### Test 6: Cross-Browser Testing

**Objective**: Verify download works in all major browsers

Test the basic export (all content types) in each browser:

**Chrome/Chromium**:
- [ ] Download initiates
- [ ] File downloads completely
- [ ] No errors in console

**Firefox**:
- [ ] Download initiates
- [ ] File downloads completely
- [ ] No errors in console

**Safari** (if available):
- [ ] Download initiates
- [ ] File downloads completely
- [ ] No errors in console

**Edge**:
- [ ] Download initiates
- [ ] File downloads completely
- [ ] No errors in console

**Status**: [ ] All Pass [ ] Some Failed

**Failed Browsers**: _______________________________________

---

## Performance Tests

### Test 7: Large Export

**Objective**: Verify export works with large datasets

**Setup**:
- Requires site with 10+ courses, 20+ lessons, 30+ quizzes

**Steps**:
1. Navigate to IELTS Courses > Export to XML
2. Select all content types
3. Click "Generate XML Export File"
4. Monitor download progress

**Expected Results**:
- ✅ Download initiates within 5 seconds
- ✅ File downloads completely
- ✅ File size is appropriate (several MB for large sites)
- ✅ No timeout errors
- ✅ No memory errors in PHP logs

**Status**: [ ] Pass [ ] Fail [ ] N/A (small dataset)

**File Size**: _________ MB

**Download Time**: _________ seconds

**Notes**: _______________________________________

---

## Security Tests

### Test 8: Unauthorized Access

**Objective**: Verify only administrators can export

**Steps**:
1. Log out of WordPress
2. Try to access export page directly:
   `your-site.com/wp-admin/edit.php?post_type=ielts_course&page=ielts-export-xml`

**Expected Results**:
- ✅ Redirected to login page
- ✅ Cannot access export functionality

**With Non-Admin User**:
1. Create a test subscriber/contributor account
2. Log in as that user
3. Try to access export page

**Expected Results**:
- ✅ Access denied or redirected
- ✅ Cannot see export menu item

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 9: Nonce Verification

**Objective**: Verify CSRF protection works

**Steps**:
1. Navigate to export page
2. Open browser developer tools
3. Try to submit export form without nonce using console:
   ```javascript
   fetch('/wp-admin/admin-post.php', {
       method: 'POST',
       body: new FormData(document.querySelector('form'))
   });
   ```

**Expected Results**:
- ✅ Request fails or shows security error
- ✅ No file downloaded
- ✅ Security check prevents export

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

## Regression Tests

### Test 10: Version Update Mechanism

**Objective**: Verify version update triggers properly

**Steps**:
1. Check WordPress options table for `ielts_cm_version`
2. Verify it shows "2.26"
3. Check transient for `ielts_cm_version_checked`

**Database Query**:
```sql
SELECT option_value FROM wp_options WHERE option_name = 'ielts_cm_version';
```

**Expected Results**:
- ✅ Option value is "2.26"
- ✅ Transient exists and is current

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 11: Existing Features Still Work

**Objective**: Verify version update didn't break other features

**Quick Checks**:
- [ ] Can create new course
- [ ] Can create new lesson
- [ ] Can create new quiz
- [ ] Can view course list
- [ ] Can enroll in course
- [ ] Can take quiz
- [ ] Progress tracking works
- [ ] Import functionality works

**Status**: [ ] All Pass [ ] Some Failed

**Failed Features**: _______________________________________

---

## Edge Cases

### Test 12: Empty Site Export

**Objective**: Verify export works with no content

**Setup**:
1. On test site with NO courses, lessons, pages, or quizzes

**Steps**:
1. Navigate to export page
2. Select all content types
3. Click export

**Expected Results**:
- ✅ Download still initiates
- ✅ File contains valid XML structure
- ✅ File contains no post items (empty channel)

**Status**: [ ] Pass [ ] Fail [ ] N/A

**Notes**: _______________________________________

---

### Test 13: Special Characters in Content

**Objective**: Verify export handles special characters correctly

**Setup**:
1. Create course with title: `Testing & "Special" Characters <>`
2. Create lesson with content containing quotes, ampersands, etc.

**Steps**:
1. Export all content
2. Open XML file
3. Check special characters are properly encoded

**Expected Results**:
- ✅ File downloads successfully
- ✅ Special characters wrapped in CDATA or properly escaped
- ✅ XML is valid and parseable
- ✅ No corruption of special characters

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

## User Experience Tests

### Test 14: Download Progress Indication

**Objective**: Verify browsers show download progress

**Steps**:
1. Export large dataset
2. Observe browser download bar/popup

**Expected Results**:
- ✅ Browser shows download progress
- ✅ File size is indicated (if browser supports)
- ✅ Progress bar moves/updates
- ✅ Download completes successfully

**Status**: [ ] Pass [ ] Fail

**Notes**: _______________________________________

---

### Test 15: File Naming

**Objective**: Verify exported files have correct names

**Steps**:
1. Perform export
2. Check downloaded file name

**Expected Results**:
- ✅ Filename follows pattern: `ielts-export-YYYY-MM-DD.xml`
- ✅ Date matches current date
- ✅ Extension is `.xml`
- ✅ No special characters in filename

**Example**: `ielts-export-2025-12-19.xml`

**Status**: [ ] Pass [ ] Fail

**Downloaded Filename**: _______________________________________

---

## Testing Summary

### Test Results

Total Tests: 15

- **Passed**: _____ / 15
- **Failed**: _____ / 15
- **N/A**: _____ / 15

### Critical Issues Found

List any critical issues (download failures, security problems, data corruption):

1. _______________________________________
2. _______________________________________
3. _______________________________________

### Minor Issues Found

List any minor issues (UI glitches, performance, etc.):

1. _______________________________________
2. _______________________________________
3. _______________________________________

---

## Deployment Recommendation

Based on testing results:

**[ ] APPROVED FOR PRODUCTION**
- All critical tests passed
- No security issues found
- Export functionality works correctly
- Version update successful

**[ ] APPROVED WITH MINOR ISSUES**
- Critical tests passed
- Minor issues documented
- Issues don't affect core functionality

**[ ] NOT APPROVED - REQUIRES FIXES**
- Critical test failures
- Security concerns
- Data integrity issues

**Approval Details**: _______________________________________

---

## Sign-Off

**Tester Name**: _______________________________________

**Date**: _______________________________________

**Environment**:
- WordPress Version: _______________________________________
- PHP Version: _______________________________________
- Server: _______________________________________
- Browser(s) Tested: _______________________________________

**Additional Notes**:

_______________________________________
_______________________________________
_______________________________________

---

**Testing Guide Version**: 1.0  
**Plugin Version Tested**: 2.26  
**Last Updated**: 2025-12-19
